<div class="row animated" #LeadsTable>
  <div class="col-md-12">
    <div class="card">
      <div class="card-header d-flex justify-content-between">
        <h4 class="card-title">Leads Table</h4>
        <div class="text-center">
          <button class="btn btn-primary m-1">
            <i class="fa-solid fa-filter"></i>
            Filter
          </button>
          <button class="btn btn-primary m-1">
            <i class="fa-regular fa-file-excel"></i>
            Export
          </button>
          <button class="btn btn-primary m-1" (click)="addLead()">
            <i class="fa-solid fa-plus"></i>
            Add
          </button>
        </div>
      </div>
      <div class="card-body">
        <div class="table-responsive overflow-auto">
          <table class="table">
            <thead class="text-secondary text-center">
              <th>#</th>
              <th>Issue date</th>
              <th>Customer name</th>
              <th>Customer mobile</th>
              <th>Car name</th>
              <th>Car model</th>
              <th>Action</th>
            </thead>
            <tbody class="text-center">
              <tr *ngFor="let lead of leads; let i = index">
                <td>{{i+1}}</td>
                <td>{{lead.issue_date}}</td>
                <td>{{lead.customer_name}}</td>
                <td>{{lead.customer_mobile}}</td>
                <td>{{lead.car_name}}</td>
                <td>{{lead.car_model}}</td>
                <td>
                  <button class="btn btn-primary m-1 px-3" (click)="getLeadById(lead.id)"><i
                      class="fa-regular fa-eye"></i></button>
                  <button class="btn btn-info m-1 px-3"><i class="fa-regular fa-pen-to-square"></i></button>
                  <button class="btn btn-danger m-1 px-3" (click)="deleteLead(lead.id)"><i
                      class="fa-solid fa-trash-can"></i></button>
                </td>
              </tr>
            </tbody>
          </table>
          <ngb-pagination [collectionSize]="pagination?.total" [page]="pagination?.current_page"
            (pageChange)="loadPage($event)" [pageSize]="pagination?.per_page">
          </ngb-pagination>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row animated d-none" #ShowLead>
  <div class="col-md-12">
    <div class="card">
      <div class="card-header d-flex justify-content-center align-items-center">
        <i class="nc-icon nc-badge" style="font-size: 25px;margin: 0px 10px;"></i>
        <h4 class="card-title">
          Customer Info
        </h4>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Name</h6> <span>{{currentLead?.customer_name}}</span>
        </div>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Mobile</h6> <span>{{currentLead?.customer_mobile}}</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Issue date</h6> <span>{{currentLead?.issue_date}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header d-flex justify-content-center align-items-center">
        <i class="nc-icon nc-delivery-fast" style="font-size: 25px;margin: 0px 10px;"></i>
        <h4 class="card-title">
          Car Info
        </h4>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Car Name</h6> <span>{{currentLead?.car_name}}</span>
        </div>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Car Color</h6> <span>{{currentLead?.car_color}}</span>
        </div>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Car Type</h6> <span>{{currentLead?.car_type}}</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Car Model</h6> <span>{{currentLead?.car_model}}</span>
        </div>
      </div>
    </div>
  </div>

  <div class="col-md-6">
    <div class="card">
      <div class="card-header d-flex justify-content-center align-items-center">
        <i class="nc-icon nc-alert-circle-i" style="font-size: 25px;margin: 0px 10px;"></i>
        <h4 class="card-title">
          General Info
        </h4>
      </div>
      <div class="card-body">
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Gear Type</h6> <span>{{currentLead?.gear_type}}</span>
        </div>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Grade</h6> <span>{{currentLead?.grade}}</span>
        </div>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Insurance</h6> <span>{{currentLead?.insurance}}</span>
        </div>
        <hr>
        <div class="d-flex justify-content-between">
          <h6 class="text-info">Kilometer</h6> <span>{{currentLead?.kilometer}}</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="row animated d-none" #AddLeadForm>
  <div class="col-12">
    <div class="card card-user">
      <div class="card-header">
        <h5 class="card-title">Lead Form</h5>
      </div>
      <div class="card-body">
        <form [formGroup]='createLeadForm' (ngSubmit)='createLead(createLeadForm)'>
          <div class="row">
            <div class="col-md-6 pr-md-1">
              <div class="form-group">
                <label>Customer Name</label>
                <input type="text" class="form-control" placeholder="Enter Customer Name"
                  formControlName='customer_name'>
              </div>
            </div>
            <div class="col-md-6 pr-md-1">
              <div class="form-group">
                <label>Customer Mobile</label>
                <input type="number" class="form-control" placeholder="+02" formControlName='customer_mobile'>
              </div>
            </div>
            <div class="col-md-6 pr-md-1">
              <div class="form-group">
                <label>Car Name</label>
                <p-dropdown [options]="carName" optionLabel="name" styleClass="w-100" formControlName='car_name'
                  optionValue="value"></p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Car Color</label>
                <p-dropdown [options]="carColor" optionLabel="name" styleClass="w-100" formControlName='car_color'
                  optionValue="value"></p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Car Type</label>
                <p-dropdown [options]="carType" optionLabel="name" styleClass="w-100" formControlName='car_type'
                  optionValue="value"></p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Gear Type</label>
                <p-dropdown [options]="gearType" optionLabel="name" styleClass="w-100" formControlName='gear_type'
                  [(ngModel)]="selectedGearType" optionValue="value"></p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Grade</label>
                <p-dropdown [options]="grade" optionLabel="name" styleClass="w-100" optionValue="value"
                  [(ngModel)]="selectedGrade" formControlName='grade'>
                </p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Car Model</label>
                <p-dropdown [options]="carModel" optionLabel="name" styleClass="w-100" formControlName='car_model'
                  [(ngModel)]="selectedCarModel" optionValue="value"></p-dropdown>
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Kilometer</label>
                <input type="number" class="form-control" placeholder="Km" formControlName='kilometer'
                  maxlength="100000">
              </div>
            </div>
            <div class="col-md-3 pr-md-1">
              <div class="form-group">
                <label>Insurance</label>
                <p-dropdown [options]="insurance" optionLabel="name" styleClass="w-100" formControlName='insurance'
                  [(ngModel)]="selectedInsurance" optionValue="value"></p-dropdown>
              </div>
            </div>

          </div>
          <div class="row">
            <div class="update ml-auto mr-auto">
              <button type="submit" class="btn btn-primary btn-round">Add Lead</button>
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<!-- TODO: Filter Complete 0% -->
<!-- TODO: Export Complete 0% -->
<!-- TODO: Pagination Complete 95% -->
<!-- TODO: Edit Complete 10% -->
<!-- TODO: Show UI Complete 90% -->
<!-- TODO: Add (missing 3 functions) Complete 90%  -->